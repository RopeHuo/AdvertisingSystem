(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65997fdd"],{"04f2":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{},[e("el-row",[e("line-chart",{attrs:{"chart-data":t.lineChartData}})],1),t._v(" "),e("campaigns-table",{ref:"campaignsTable",attrs:{campaignStatus:t.campaignStatus,campaignType:t.campaignType}})],1)},i=[],s=(e("3b2b"),e("a481"),e("db72")),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ess-table"},[e("operation-table",{attrs:{campaignStatus:t.campaignStatus}}),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.post.loading,expression:"post.loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.origin.table.data,"summary-method":t.getSummaries,"show-summary":"",border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{fixed:"",label:"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"status inlineBlock"},[e("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"}},[e("a",{staticClass:"el-dropdown-link"},["ENABLED"==a.row.status?e("span",{staticClass:"start-status"}):t._e(),t._v(" "),"PAUSED"==a.row.status?e("svg-icon",{attrs:{"icon-class":"pause"}}):t._e()],1),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("a",[e("span",{staticClass:"start-status"}),t._v(" "),e("span",[t._v("启用")])])]),t._v(" "),e("el-dropdown-item",[e("a",[e("svg-icon",{attrs:{"icon-class":"pause"}}),t._v(" "),e("span",[t._v("停用")])],1)])],1)],1)],1),t._v(" "),e("div",{staticClass:"campaignName inlineBlock"},["SEARCH"==a.row.advertisingChannelType?e("svg-icon",{staticClass:"svg-middle",attrs:{"icon-class":"searchad"}}):t._e(),t._v(" "),"DISPLAY"==a.row.advertisingChannelType?e("svg-icon",{staticClass:"svg-middle",attrs:{"icon-class":"displayad"}}):t._e(),t._v("\n          "+t._s(a.row.campaignName)+"\n        ")],1)]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"amount",label:"预算",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n        ￥"+t._s(a.row.amount)+"\n      ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return["ENABLED"==a.row.status?e("span",[t._v("有效")]):t._e(),t._v(" "),"PAUSED"==a.row.status?e("span",[t._v("已暂停")]):t._e(),t._v(" "),"REMOVED"==a.row.status?e("span",[t._v("已移除")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"advertisingChannelType",label:"广告系列类型"},scopedSlots:t._u([{key:"default",fn:function(a){return["DISPLAY"==a.row.advertisingChannelType?e("span",[t._v("展示")]):t._e(),t._v(" "),"SEARCH"==a.row.advertisingChannelType?e("span",[t._v("搜索")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"展示次数"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n        "+t._s(a.row.reports.impressions)+"\n      ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"biddingStrategyType",label:"出价策略类型","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return["MANUAL_CPC"==a.row.biddingStrategyType?e("span",[t._v("每次点击费用")]):t._e(),t._v(" "),"MANUAL_CPM"==a.row.biddingStrategyType?e("span",[t._v("按展示次数")]):t._e()]}}])})],1),t._v(" "),e("div",{staticClass:"page-table"},[e("el-pagination",{attrs:{"current-page":t.origin.table.current_page,"page-sizes":[10,30,50,200,500],"page-size":t.post.table.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.origin.table.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),e("div",{staticStyle:{"margin-top":"20px",display:"none"}},[e("el-button",{on:{click:function(a){return t.toggleSelection([t.tableData[1],t.tableData[2]])}}},[t._v("切换第二、第三行的选中状态")]),t._v(" "),e("el-button",{on:{click:function(a){return t.toggleSelection()}}},[t._v("取消选择")])],1)],1)},r=[],c=(e("c5f6"),e("ac6a"),e("2f62")),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("operation-add-compaigns"),t._v(" "),e("div",{staticClass:"operation-box"},[e("div",{staticClass:"left-search"},[e("svg-icon",{staticClass:"operation-filter",attrs:{"icon-class":"operation-filter"}}),t._v(" "),e("el-dropdown",{staticClass:"dropCampainsMenu",attrs:{trigger:"click",placement:"bottom-start"}},[e("el-button",{staticClass:"changeStatus"},[t._v("广告系列状态："),"ALL"==t.campaignStatus?e("span",[t._v("所有")]):t._e(),t._v(" "),"ENABLED"==t.campaignStatus?e("span",[t._v("所有已启用")]):t._e(),t._v(" "),"RESERVED"==t.campaignStatus?e("span",[t._v("所有未移除")]):t._e()]),t._v(" "),e("el-dropdown-menu",{staticClass:"el-dropdown-menu",attrs:{slot:"dropdown","split-button":""},slot:"dropdown"},[e("div",[e("el-dropdown-item",{staticClass:"campaign-table-menu"},[e("a",{staticClass:"campaign-menu-status",class:{"is-active":"ALL"==t.campaignStatus},on:{click:function(a){return t.changeCampaignStatus("ALL")}}},[t._v("所有")])]),t._v(" "),e("el-dropdown-item",{staticClass:"campaign-table-menu"},[e("a",{staticClass:"campaign-menu-status",class:{"is-active":"ENABLED"==t.campaignStatus},on:{click:function(a){return t.changeCampaignStatus("ENABLED")}}},[t._v("所有已启用")])]),t._v(" "),e("el-dropdown-item",{staticClass:"campaign-table-menu"},[e("a",{staticClass:"campaign-menu-status",class:{"is-active":"RESERVED"==t.campaignStatus},on:{click:function(a){return t.changeCampaignStatus("RESERVED")}}},[t._v("所有未移除")])])],1)])],1)],1),t._v(" "),e("div",{staticClass:"right-operation"},[e("ul",[e("li",{staticClass:"dowandnup",on:{click:t.changeDownStatus}},[e("i",{class:t.is_down?"el-icon-arrow-down":"el-icon-arrow-up"})])]),t._v(" "),e("span",{staticClass:"spacing"}),t._v(" "),e("ul",[e("li",[e("svg-icon",{attrs:{"icon-class":"operation-search"}}),e("span",[t._v("搜索")])],1),t._v(" "),e("li",[e("svg-icon",{attrs:{"icon-class":"operation-detail"}}),e("span",[t._v("细分")])],1),t._v(" "),e("li",[e("svg-icon",{attrs:{"icon-class":"operation-column"}}),e("span",[t._v("列")])],1),t._v(" "),e("li",[e("svg-icon",{attrs:{"icon-class":"operation-report"}}),e("span",[t._v("报告")])],1),t._v(" "),e("li",[e("svg-icon",{attrs:{"icon-class":"operation-down"}}),e("span",[t._v("下载")])],1),t._v(" "),e("li",[e("svg-icon",{attrs:{"icon-class":"operation-more"}}),e("span",[t._v("更多")])],1)])])])],1)},u=[],p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("router-link",{attrs:{to:"/campaigns/add"}},[e("div",{staticClass:"add"},[e("svg-icon",{staticClass:"operation-create",attrs:{"icon-class":"operation-create"}})],1)])],1)},d=[],h={data:function(){return{}},methods:{}},m=h,g=(e("139b"),e("2877")),v=Object(g["a"])(m,p,d,!1,null,"4b97d730",null),f=v.exports,_={props:["campaignStatus"],components:{OperationAddCompaigns:f},data:function(){return{is_down:!0}},methods:{changeCampaignStatus:function(t){this.$store.dispatch("menu/changeCampaignStatus",t)},changeDownStatus:function(){this.is_down=!this.is_down}}},b=_,y=Object(g["a"])(b,l,u,!1,null,null,null),w=y.exports,S=e("209c"),C={components:{OperationTable:w},props:["campaignType","campaignStatus"],data:function(){return{origin:{table:{}},post:{loading:!1,table:{page:1,per_page:10}},multipleSelection:[]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.post.loading=!0;var a=this.post.table;Object(S["b"])(a).then(function(a){a.success&&(t.origin.table=a.data),t.post.loading=!1})},handleCurrentChange:function(t){this.post.table=Object.assign(this.post.table,{page:t}),this.fetchData()},handleSizeChange:function(t){this.post.table=Object.assign(this.post.table,{per_page:t}),this.fetchData()},getSummaries:function(t){var a=t.columns,e=t.data,n=[];return a.forEach(function(t,a){if(1!==a){var i=e.map(function(a){return Number(a[t.property])});i.every(function(t){return isNaN(t)})?n[a]="":(n[a]=i.reduce(function(t,a){var e=Number(a);return isNaN(e)?t:t+a},0),n[a]="￥"+n[a])}else n[a]="总计：广告系列"}),n},toggleSelection:function(t){var a=this;t?t.forEach(function(t){a.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t}}},E=C,$=(e("d4e7"),Object(g["a"])(E,o,r,!1,null,"6bb30f52",null)),D=$.exports,R=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},z=[],T=e("313e"),O=e.n(T),k=e("eec2");e("817d");var x={mixins:[k["a"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=O.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.clicks,e=t.cost,n=t.ctr,i=t.impressions,s=t.title;this.chart.setOption({xAxis:{data:s,boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:["点击次数","展示次数","平均每次点击费用","费用"]},series:[{name:"点击次数",itemStyle:{normal:{color:"#3b78e7",lineStyle:{color:"#3b78e7",width:2}}},smooth:!0,type:"line",data:a,animationDuration:2800,animationEasing:"cubicInOut"},{name:"展示次数",smooth:!0,type:"line",itemStyle:{normal:{color:"#d23f31",lineStyle:{color:"#d23f31",width:2}}},data:i,animationDuration:2800,animationEasing:"quadraticOut"},{name:"平均每次点击费用",smooth:!0,type:"line",itemStyle:{normal:{color:"#f2a600",lineStyle:{color:"#f2a600",width:2}}},data:n,animationDuration:2800,animationEasing:"quadraticOut"},{name:"费用",smooth:!0,type:"line",itemStyle:{normal:{color:"#0d904f",lineStyle:{color:"#0d904f",width:2}}},data:e,animationDuration:2800,animationEasing:"quadraticOut"}]})}}},A=x,L=Object(g["a"])(A,R,z,!1,null,null,null),N=L.exports,j={name:"Campaigns",components:{LineChart:N,CampaignsTable:D},data:function(){return{lineChartData:{}}},computed:Object(s["a"])({},Object(c["b"])(["campaignType","campaignStatus"])),watch:{campaignStatus:function(t,a){this.$refs.campaignsTable.post.table.page=1,this.$refs.campaignsTable.post.table.status=this.campaignStatus,this.$refs.campaignsTable.fetchData(),this.getCampaingsReports()},campaignType:function(t,a){this.$refs.campaignsTable.post.table.page=1,this.$refs.campaignsTable.post.table.type=this.campaignType,this.$refs.campaignsTable.fetchData(),this.getCampaingsReports()}},mounted:function(){this.getCampaingsReports()},methods:{getCampaingsReports:function(){var t=this;Date.prototype.Format=function(t){var a={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t};var a={type:"campaign",begin_date:(new Date).Format("yyyyMMdd"),end_date:(new Date).Format("yyyyMMdd")};Object(S["c"])(a).then(function(a){t.lineChartData=a.data})}}},M=j,H=Object(g["a"])(M,n,i,!1,null,null,null);a["default"]=H.exports},"073c":function(t,a,e){},"139b":function(t,a,e){"use strict";var n=e("073c"),i=e.n(n);i.a},"209c":function(t,a,e){"use strict";e.d(a,"b",function(){return i}),e.d(a,"c",function(){return s}),e.d(a,"a",function(){return o}),e.d(a,"d",function(){return r});var n=e("b775");function i(t){return Object(n["a"])({url:"/api/v2/campaigns",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/api/v2/reports/chart",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/api/v2/campaigns",method:"post",params:t})}function r(t){return Object(n["a"])({url:"/api/v2/campaigns/"+t,method:"get"})}},"50be":function(t,a,e){},d4e7:function(t,a,e){"use strict";var n=e("50be"),i=e.n(n);i.a},eec2:function(t,a,e){"use strict";var n=e("ed08");a["a"]={data:function(){return{$_sidebarElm:null}},mounted:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_resizeHandler:function(){var t=this;return Object(n["b"])(function(){t.chart&&t.chart.resize()},100)()},$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}}}}]);